<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>GigaWallet - A backend for your Dogecoin Business</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="Dogecoin GigaWallet is a backend service which provides a convenient integration API for platforms such as online shops, exchanges, social media platforms etc, to accept and transact Dogecoin on behalf of their users.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">What is GigaWallet?</li><li class="chapter-item expanded "><a href="what.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="concepts.html"><strong aria-hidden="true">2.</strong> Basic Concepts</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">3.</strong> Installation</a></li><li class="chapter-item expanded affix "><li class="part-title">Integration</li><li class="chapter-item expanded "><a href="accounts.html"><strong aria-hidden="true">4.</strong> Working with Accounts</a></li><li class="chapter-item expanded "><a href="invoices.html"><strong aria-hidden="true">5.</strong> Working with Invoices</a></li><li class="chapter-item expanded "><a href="connect.html"><strong aria-hidden="true">6.</strong> Doge Connect - Payment Protocol</a></li><li class="chapter-item expanded "><a href="payout.html"><strong aria-hidden="true">7.</strong> Paying Out</a></li><li class="chapter-item expanded "><a href="webhooks.html"><strong aria-hidden="true">8.</strong> Webhooks</a></li><li class="chapter-item expanded "><a href="mqtt.html"><strong aria-hidden="true">9.</strong> MQTT</a></li><li class="chapter-item expanded affix "><li class="part-title">Contributing</li><li class="chapter-item expanded "><a href="extending.html"><strong aria-hidden="true">10.</strong> Extending</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">GigaWallet - A backend for your Dogecoin Business</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/dogecoinfoundation/gigawallet/tree/main/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="what-is-gigawallet"><a class="header" href="#what-is-gigawallet">What is GigaWallet?</a></h1>
<p><img src="images/GigaWallet.gif" alt="The GigaWallet Logo" width="60%" style="margin-left: 20%;"/></p>
<p>Dogecoin GigaWallet is a backend service which provides a convenient integration API
for platforms such as online shops, exchanges, social media platforms etc, to accept
and transact Dogecoin on behalf of their users.</p>
<p>The purpose of the GigaWallet is to promote the rapid uptake of Dogecoin as a payment
option, by taking the complexity and risk out of integrating Dogecoin payments into
business.</p>
<p><a href="https://github.com/dogecoinfoundation/gigawallet"><img src="https://img.shields.io/badge/Github_repo-test?style=flat&amp;logo=github&amp;logoColor=white&amp;label=GigaWallet&amp;labelColor=black&amp;color=white" alt="Static Badge" /></a></p>
<h2 id="its-dangerous-to-go-alone-take-this-maybe"><a class="header" href="#its-dangerous-to-go-alone-take-this-maybe">It's dangerous to go alone, take this? Maybe!</a></h2>
<blockquote>
<p>⚠️ Note: GigaWallet is a software-engineering component for anyone looking to
integrate Dogecoin into their product, this is not a user-facing Dogecoin wallet.
If you are a user looking for a dogecoin wallet you can search the <a href="https://dogecoin.com/wallets/">wallet index</a>
on the <a href="https://dogecoin.com">dogecoin.com</a> website.</p>
</blockquote>
<p><img src="images/dangerous.png" alt="dangerous to go alone" width="60%" style="margin-left: 20%;"/></p>
<p>It is expected that you are a comfortable with managing server infrastructure and
integrating with REST APIs. GigaWallet is a service that <em>must</em> be deployed behind a
firewall that protects it's sensitive APIs from the public internet, to which you
will integrate your public-facing systems.</p>
<p>Effort has been taken to create a system which integrates with <em>your platform</em>, and
so the APIs for Accounts all require a <em>foreignID</em> which represents the account from
your system.</p>
<p>GigaWallet manages it's own database to track HD wallets, Invoices,
UTXOs and other data it needs, however it is not a general-purpose shopping cart
or user management system, it is expected that you will provide what you need on
your side to create the magic ✨ you have in mind, good luck adventurer!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-concepts"><a class="header" href="#basic-concepts">Basic Concepts</a></h1>
<p>GigaWallet has been designed as a drop-in solution for anyone who needs
to accept Dogecoin and respond in a timely manner when payment arrives.</p>
<p>From individual stores who need a Dogecoin checkout solution to global
social media networks with millions of users recieving and sending each-other
tips or payments, GigaWallet aims to be adaptable to each scenario. To
achieve this aim we have some simple abstractions for managing payment:</p>
<h1 id="accounts"><a class="header" href="#accounts">Accounts</a></h1>
<p>An Account manages a Dogecoin HD wallet, which is used to sign transactions
for outgoing payments, and create child-addresses for each Invoice issued.</p>
<p>Accounts are created using the <code>POST /account</code> <a href="concepts.html#admin-api">Admin API</a>, and require a
foreignID from your system which will be used to address the account on
further API calls.</p>
<p>Accounts have many <a href="concepts.html#invoices">Invoices</a> which represent requests for payment,
as well as a Balance which tracks current available Dogecoin and current
pending incoming and outgoing transactions.</p>
<p>How you map Accounts to your system depends on your objective, you may
have an account per user in the case of a Social Media platform, or if
you are an entity with a number of clients you could choose to
manage each with their own pay-to account.</p>
<p><a href="/accounts.html">You can read more about Accounts here.</a></p>
<h1 id="invoices"><a class="header" href="#invoices">Invoices</a></h1>
<p>Accounts are used to issue Invoices, which are a collection of Items with
quantities and values. Items represent a line on the invoice and come in
a number of types: item, tax, fee, shipping, discount, donation, etc.</p>
<p>An invoice is created using the <code>POST /account/:foreignID/invoice</code> <a href="concepts.html#admin-api">Admin API</a>
and once created cannot be modified, GigaWallet is not a shopping-cart system
and if you want users to be able to add/remove items that should happen on
your side <em>before</em> an Invoice is issued.</p>
<p>Invoices provide payment URLs, QRCodes and DogeConnect JSON Payloads via the <a href="concepts.html#public-api">Public API</a>
which can be used by your front-end to provide convenience payment options
for your users.</p>
<p><a href="/invoices.html">You can read more about Invoices here.</a></p>
<h1 id="dogecoin-connect"><a class="header" href="#dogecoin-connect">Dogecoin Connect</a></h1>
<h1 id="public-api"><a class="header" href="#public-api">Public API</a></h1>
<h1 id="admin-api"><a class="header" href="#admin-api">Admin API</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<h2 id="pre-requisites"><a class="header" href="#pre-requisites">Pre-requisites</a></h2>
<p>GigaWallet is intentionally easy to compile and run, weather you
are looking to build from source or via containers, we've got you
covered.</p>
<h3 id="golang-compiler"><a class="header" href="#golang-compiler">Golang compiler</a></h3>
<p>To build from source you will need the Golang compiler installed.
Head on over to <a href="https://go.dev/doc/install">go.dev and grab a
copy for your local environment</a>.</p>
<h3 id="dogecoin-core-node"><a class="header" href="#dogecoin-core-node">Dogecoin Core Node</a></h3>
<p>GigaWallet currently depends on a co-located instance of the Dogecoin
Core Node project, we recommend building this without the wallet / QT
features, and with the RPC APIs.</p>
<blockquote>
<p>⚠️ <strong>Important:</strong> Gigawallet trusts the Core Node to provide accurate blockchain data; for this reason is <strong>critically important</strong> to use a Core Node that you fully trust. It's safest to host the Core Node yourself.</p>
</blockquote>
<p>If you would like to build this yourself or download binaries you
can grab these at
<a href="https://github.com/dogecoin/dogecoin">Github.com/dogecoin/dogecoin</a>,</p>
<p>alternatively if you're happy with containers or packages try the
<a href="installation.html#running-with-nixos">NixOS</a> or <a href="installation.html#running-with-docker">Docker</a> deployment
methods.</p>
<blockquote>
<p>⚠️ Note: Running a full core node requires a significant amount
of disk to contain the entire Dogecoin blockchain (140Gb as at March 2024),
as well as a moderate amound of bandwidth.</p>
</blockquote>
<h2 id="building-from-source"><a class="header" href="#building-from-source">Building from source</a></h2>
<p>Install some dependencies required to build Gigawallet:</p>
<ul>
<li>GCC compiler toolchain (for <a href="https://go.dev/blog/cgo">cgo</a> i.e. Go-to-C linking; only GCC is supported!)</li>
<li>zeroMQ version 4 – <a href="https://zeromq.org/download/">docs</a> <a href="http://wiki.zeromq.org/intro:get-the-software">wiki</a></li>
<li>SQLite 3 – <a href="https://www.sqlite.org/download.html">docs</a></li>
</ul>
<pre><code class="language-shell">sudo apt-get update
sudo apt-get install libzmq3-dev sqlite3 libsqlite3-dev build-essential pkg-config
</code></pre>
<p><strong>On Windows</strong>: you can use <a href="https://learn.microsoft.com/en-us/windows/wsl/install">WSL</a> to install these tools, and build Gigawallet from inside the WSL environment (you can access windows drives via <code>/mnt/c</code> etc.) Alternatively there is <a href="https://www.msys2.org/">MSYS2</a> which provides a GCC build environment without using WSL.</p>
<p><strong>On Mac</strong>: you can use <a href="https://brew.sh/">Homebrew</a>: <code>brew install zmq pkg-config</code> – note that <code>sqlite3</code> is pre-installed on modern macs. You can brew install <code>git</code> if necessary.</p>
<h3 id="building-gigawallet"><a class="header" href="#building-gigawallet">Building Gigawallet</a></h3>
<p>Check out the project from Github and run <code>make</code></p>
<pre><code class="language-sh">&gt; git clone git@github.com:dogecoinfoundation/gigawallet.git
...

&gt; cd gigawallet
&gt; make
</code></pre>
<p>This will create a <code>gigawallet</code> binary in <code>/build/</code>.</p>
<p><code>gigawallet</code> has several subcommands:</p>
<ul>
<li><code>./gigawallet server</code> starts the server running.</li>
<li><code>./gigawallet printconf</code> will dump out the config structure and exit.</li>
<li><code>./gigawallet setsyncheight &lt;height&gt;</code> will rewind the entire db and begin re-indexing from core, you probably don't need this.. probably.</li>
</ul>
<blockquote>
<p>⚠️ Note: Developer Shortcut
If you are developing in the repository you can simply run <code>make dev</code> which will stand-up
the server using the devconf.toml file. VS Code debugger also works.</p>
</blockquote>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<h3 id="config-file-location"><a class="header" href="#config-file-location">Config file location</a></h3>
<p>By default the <code>gigawallet</code> command will look for a <code>config.toml</code> file in one of:</p>
<pre><code>. 
/etc/gigawallet/ 
$HOME/.gigawallet/
</code></pre>
<p>The name of the config file can be changed by providing the GIGA_ENV environment variable.
This allows you to operate several different config files and switch between them, for instance
if you have:</p>
<pre><code>/etc/gigawallet/production.toml
/etc/gigawallet/staging.toml
</code></pre>
<p>You could switch between them with <code>GIGA_ENV=production gigawallet &lt;subcommands&gt;</code>.</p>
<h3 id="eaxample-config"><a class="header" href="#eaxample-config">Eaxample config</a></h3>
<p>There is an exmaple config file which is kept current with the software in the repo
<a href="https://raw.githubusercontent.com/dogecoinfoundation/gigawallet/main/devconf.toml">https://raw.githubusercontent.com/dogecoinfoundation/gigawallet/main/devconf.toml</a>
which you can use as a starting point.</p>
<h3 id="configure-api-ports"><a class="header" href="#configure-api-ports">Configure API ports</a></h3>
<p>Gigawallet exposes two REST APIs:</p>
<ul>
<li>
<p><strong>Admin API</strong> which provides sensitive, internal functionality which is called
from your own backend services, and must be <strong>protected behind a firewall</strong>.</p>
</li>
<li>
<p><strong>Public API</strong> which provides web-facing routes for your front-end calls, for
fetching Invoice data, QR codes for payments, and the Doge Connect protocol
endpoints. We recommend this sit behind your load-balancer/proxy and be routed
to as required for your needs.</p>
</li>
</ul>
<p><code>pubapirooturl</code> is used internally when generating Doge Connect payloads to
allow clients to submit payments back to Gigawallet for processing.</p>
<pre><code class="language-toml">[WebAPI]
  adminbind = "localhost"
  adminport = "8081"
  pubbind = "localhost"
  pubport = "8082"
  pubapirooturl = "https://example.com/gigawallet"
</code></pre>
<h2 id="configure-the-data-store"><a class="header" href="#configure-the-data-store">Configure the data store</a></h2>
<p>Gigawallet currently operates using SQLite or PostgreSQL databases. We recommend
using sqlite for development / local testing, and PostgreSQL for production. Also
note that you can easily extend Gigawallet for different databases, see <a href="extending">Extending</a>.</p>
<h3 id="running-with-sqlite-default"><a class="header" href="#running-with-sqlite-default">Running with sqlite (default)</a></h3>
<pre><code class="language-toml">[Store]
  DBFile = "gigawallet.db"
</code></pre>
<h3 id="running-with-postgresql"><a class="header" href="#running-with-postgresql">Running with PostgreSQL</a></h3>
<pre><code class="language-toml">[Store]
  DBFile = "postgres://username:password@localhost/gigawallet?sslmode=disable"
</code></pre>
<p>Currently Gigawallet PostgreSQL requires full permissions to create tables / indexes
which is an unfortunate side-effect of our sqlite-first development, this will be
changed in the future, however for now here is a quick-start for setting up a new
DB:</p>
<pre><code class="language-sql">-- create a database, you can call it whatever you like.
CREATE DATABASE gigawallet;

-- create a user, pick a better password than this!
CREATE USER gigawallet WITH PASSWORD 'up-up-down-down-left-right-left-right-b-a-start';

-- set the database owner and grant permissions
ALTER DATABASE gigawallet OWNER TO gigawallet;
GRANT ALL ON DATABASE gigawallet TO gigawallet;
</code></pre>
<p>As mentioned above, Gigawallet will create all tables it needs on first run.</p>
<h3 id="configuring-core-access"><a class="header" href="#configuring-core-access">Configuring Core access</a></h3>
<p>As mentioned above, Gigawallet is currently designed to co-locate with a Core instance
for communicating with the Dogecoin L1 network.</p>
<p>You can create as many <code>[dogecoind.nnnnn]</code> sections as you like to represent access
to various Core instances you may have, which gets used is determined by the <code>gigawallet.network</code>
value.</p>
<pre><code class="language-toml">
[gigawallet]
  network = "mainnet"  # which dogecoind to connect to

[dogecoind.testnet]
  host    = "127.0.0.1"
  zmqport = 28332
  rpcport = 44555
  rpcpass = "gigawallet"
  rpcuser = "gigawallet"

[dogecoind.mainnet]
  host    = "127.0.0.1"
  zmqport = 28332
  rpchost = "127.0.0.1"
  rpcport = 22555
  rpcpass = "gigawallet"
  rpcuser = "gigawallet"
</code></pre>
<h3 id="configuring-loggers"><a class="header" href="#configuring-loggers">Configuring Loggers</a></h3>
<p>Gigawallet can create as many loggers as you like, these log events that cross the
[internal event-bus]. Events have a type which is one of:</p>
<ul>
<li>SYS  - System messages &amp; errors.</li>
<li>ACC  - Account events.</li>
<li>INV  - Invoice events.</li>
<li>NET  - Network (L1) events.</li>
<li>ALL  - Synthetic type which catches all of the above.</li>
</ul>
<p>Loggers are specified as a list of types and a path:</p>
<pre><code class="language-toml">[loggers.events]
  path = "./events.log"
  types = ["ALL"]

[loggers.system]  
  path = "./system.log"
  types = ["SYS"]
  
</code></pre>
<h3 id="configuring-http-callbacks"><a class="header" href="#configuring-http-callbacks">Configuring HTTP Callbacks</a></h3>
<p>Callbacks or 'webhooks' are URLs which you can configure to recieve HTTP POST requests
containing JSON-encoded event bodies. This can be used by your system to respond to events
such as invoice paid etc.</p>
<p>To configure callbacks, provide a path and a type of event you'd like (see Loggers for a list)</p>
<pre><code class="language-toml">[callbacks.example1]
  path = "https://example.com/MyInvoiceEvents"
  types = ["INV"]
</code></pre>
<h3 id="configuring-mqtt-topics"><a class="header" href="#configuring-mqtt-topics">Configuring MQTT topics</a></h3>
<p>If http callbacks are not your thing, you can send events to an MQTT compatible message service.
Firstly use the <code>[mqtt]</code> block to configure the server you'd like to connect to, then set up one
or more <code>[mqtt.queues.*]</code> blocks with a topicfilter and types of events to send.</p>
<pre><code class="language-toml">[mqtt]
  address = "test.mosquitto.org:1884"
  username = "rw"
  password = "readwrite"
  clientid = "gigawallet"

[mqtt.queues.accounts]
  topicfilter = "account"
  Types = ["ACC"]
</code></pre>
<h2 id="running-with-nixos"><a class="header" href="#running-with-nixos">Running with NixOS</a></h2>
<p>TODO</p>
<h2 id="running-with-docker"><a class="header" href="#running-with-docker">Running with Docker</a></h2>
<p>TODO</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="working-with-accounts"><a class="header" href="#working-with-accounts">Working with Accounts</a></h1>
<p>Gigawallet is designed as a backend component that sits within your infrastructure, and
as such is not supposed to be your system's user-database. It is designed with a fairly
generic <code>Account</code> model which can be used as you see fit to match your business needs.</p>
<p>Each <code>Account</code> within Gigawallet represents a Dogecoin HD Wallet, which is used to derive
child-addresses per <code>Invoice</code>. Accounts can list invoices, refund payments and have a
<code>Balance</code> of their own.</p>
<p>Accounts are created with a <code>Foreign ID</code> which is provided by you and links the account
to your system. Most Admin APIs use this Foreign ID to reference internal accounts so
that you can easily integrate Gigawallet with your own systems.</p>
<h2 id="different-ways-to-use-accounts-with-your-system"><a class="header" href="#different-ways-to-use-accounts-with-your-system">Different ways to use Accounts with your system</a></h2>
<h3 id="scenario-1---wholesale-store"><a class="header" href="#scenario-1---wholesale-store">Scenario 1 - Wholesale Store</a></h3>
<p>You are a wholesale business selling dog-collars, dog-leads and accessories to pet stores.
You have a <code>customers database</code> with a <code>Customer ID</code> number for each pet store. You create a
Gigawallet <code>Account</code> per customer using your <code>Customer ID</code> as the <code>Foreign ID</code>.</p>
<p>You can:</p>
<ul>
<li>Issue invoices to your customers, including shipping fees and taxes.</li>
<li>List invoices per customer.</li>
<li>Manage refunds with a 'wallet' per customer to ensure funds are accessible.</li>
<li>Check total balances received and pay those out to your central wallet when ready.</li>
</ul>
<h3 id="scenario-2---online-dogecoin-payments-saas"><a class="header" href="#scenario-2---online-dogecoin-payments-saas">Scenario 2 - Online Dogecoin Payments SaaS</a></h3>
<p>You are a payment provider like PayPal, Square, etc. And are looking for a method to
manage Dogecoin payments. You have a <code>users database</code> with a snowflake ID per user. You
create a Gigawallet <code>Account</code> per user using your snowflake ID as the <code>Foreign ID</code>.</p>
<p>You can:</p>
<ul>
<li>Issue invoices on behalf of your users.</li>
<li>Automatically pay-out to your user's cold wallet based on various thresholds.</li>
<li>Provide a realtime balance of user's funds.</li>
<li>Provide reports on payments in and out over time.</li>
</ul>
<h3 id="scenario-3---traditional-crypto-exchange"><a class="header" href="#scenario-3---traditional-crypto-exchange">Scenario 3 - Traditional Crypto Exchange</a></h3>
<p>You are a traditional Crypto Exchange managing trades on behalf of your users. Gigawallet
is configured with an account per user, consistent with your existing user databases.</p>
<p>You can:</p>
<ul>
<li>Recieve payment in Dogecoin from your users into their Dogecoin wallet for trading.</li>
<li>Pay Dogecoin to your users wallet once trading is complete.</li>
<li>Provide balance and reports on payments to and from their wallets.</li>
<li>Configure auto-payouts to your users cold-wallet so they don't leave their Dogecoin on exchanges.</li>
</ul>
<h3 id="scenario-4---global-scale-platform-ie-xcom-twitch-tv-ebay-etc"><a class="header" href="#scenario-4---global-scale-platform-ie-xcom-twitch-tv-ebay-etc">Scenario 4 - Global Scale platform ie: X.com, Twitch TV, EBay, etc.</a></h3>
<p>You are a large scale unicorn with hundreds of millions of users. Your infrastructure teams
can deploy Gigawallet in multiple configurations on your kubernetes clusters with appropriate auto-scaling
and user sharding (in development). Gigawallet integrates directly into your existing stack
with simple REST calls.</p>
<p>You can:</p>
<ul>
<li>Give each user the ability to recieve tips, accept and make payments, pay for products and subscriptions.</li>
<li>Query balances and issue payouts to users personal wallets.</li>
<li>Integrate Gigawallet directly into your messaging system (via MQTT) to trigger events when payments are confirmed.</li>
<li>Help Dogecoin gain real utility as a global currency for all humanity.</li>
</ul>
<h2 id="account-administration-apis"><a class="header" href="#account-administration-apis">Account Administration APIs</a></h2>
<h3 id="post-accountforeignid"><a class="header" href="#post-accountforeignid">POST /account/:foreignID</a></h3>
<p><em>Create or update an Account</em></p>
<p><code>:foreignID</code> is a gobal, (or shard)-unique identifier from your system which you will use
to address this <code>account</code> in subsequent requests.</p>
<p><em><strong>REQUEST BODY:</strong></em></p>
<p>Expected POST Body, an empty <code>{}</code> is fine to touch an account into existence.</p>
<pre><code class="language-js">{
  "payout_address" : "&lt;P2PKH Dogecoin Address&gt;",  // optional for auto-payout
  "payout_threshold" : "&lt;decimal amount of dogecoin before auto-payout&gt;" //optional 
  "payout_frequency" : "&lt;duration in seconds for time-based auto-payouts&gt;" //optional 
}
</code></pre>
<p><em><strong>RESPONSE BODY:</strong></em></p>
<p>Example response from <code>POST {} /account/123456789</code></p>
<pre><code class="language-js">{
    "foreign_id": "12345789",
    "id": "DRQu6WR6bpU9N4rm87PvpWZLQSqmGgphFD",
    "payout_address": "",
    "payout_frequency": "",
    "payout_threshold": "0"
}
</code></pre>
<p>Your account is now created with an HD wallet managed by Gigawallet.</p>
<h3 id="get-accountforeignid"><a class="header" href="#get-accountforeignid">GET /account/:foreignID</a></h3>
<p><em>Get an Account</em></p>
<p><em><strong>RESPONSE BODY:</strong></em></p>
<p>Example response from <code>GET /account/123456789</code></p>
<pre><code class="language-js">{
    "foreign_id": "12345789",
    "id": "DRQu6WR6bpU9N4rm87PvpWZLQSqmGgphFD",
    "payout_address": "",
    "payout_frequency": "",
    "payout_threshold": "0"
}
</code></pre>
<h3 id="get-accountforeignidbalance"><a class="header" href="#get-accountforeignidbalance">GET /account/:foreignID/balance</a></h3>
<p><em>Get an Account's AccountBalance</em></p>
<pre><code class="language-js">{
    "CurrentBalance": "1000",       // Current balance available for spending 
    "IncomingBalance": "24.89774",  // Incoming payments which have not met the confirmation threshold
    "OutgoingBalance": "0"          // Outgoing payments which have not met the confirmation threshold
}
</code></pre>
<h3 id="post-accountforeignidpay"><a class="header" href="#post-accountforeignidpay">POST /account/:foreignID/pay</a></h3>
<p><em>Send a payment from this account to an Address</em></p>
<p><em><strong>REQUEST BODY:</strong></em></p>
<pre><code class="language-js">{ "amount": "420.69, "to": "DPeTgZm7LabnmFTJkAPfADkwiKreEMmzio" } 
</code></pre>
<h2 id="account-events"><a class="header" href="#account-events">Account Events</a></h2>
<p>Events are available either via http callbacks or MQTT messages.</p>
<p>TODO</p>
<h3 id="acc_created-created"><a class="header" href="#acc_created-created">ACC_CREATED "CREATED"</a></h3>
<h3 id="acc_updated-updated"><a class="header" href="#acc_updated-updated">ACC_UPDATED "UPDATED"</a></h3>
<h3 id="acc_payment-payment"><a class="header" href="#acc_payment-payment">ACC_PAYMENT "PAYMENT"</a></h3>
<h3 id="acc_chain_activity-chain_activity"><a class="header" href="#acc_chain_activity-chain_activity">ACC_CHAIN_ACTIVITY "CHAIN_ACTIVITY"</a></h3>
<h3 id="acc_balance_change-balance_change"><a class="header" href="#acc_balance_change-balance_change">ACC_BALANCE_CHANGE "BALANCE_CHANGE"</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="working-with-invoices"><a class="header" href="#working-with-invoices">Working with Invoices</a></h1>
<p>Once you have <a href="/accounts/">Accounts</a> established it's time to start issuing Invoices. Invoices are
simply a list of items, services, taxes, fees, discounts etc. which a seller is offering for payment
in Dogecoin.</p>
<blockquote>
<p>📚 Wikipedia:
An invoice, bill or tab is a commercial document issued by a seller to a buyer relating to a sale
transaction and indicating the products, quantities, and agreed-upon prices for products or services
the seller had provided the buyer.</p>
</blockquote>
<p>As mentioned previously Gigawallet is not your general-purpose user database, just so it is not
your general purpose shopping-cart either. For this reason <code>Invoices</code> are specifically
designed to encourage you to have finalised all purchase decisions before issuing an Invoice as the
final step when your user wants to pay in Dogecoin. Once created an invoice cannot be directly updated
(this is a design decision!) Gigawallet is a payment system for Dogecoin.</p>
<h3 id="parts-of-an-invoice"><a class="header" href="#parts-of-an-invoice">Parts of an Invoice</a></h3>
<p>An invoice is created via the <code>POST /account/:foreignID/invoice</code> endpoint and consists of a list of
items along with metadata about the status of the payment. Here is an example invoice:</p>
<pre><code class="language-json">{
  "id": "DNBVSoHLhX4gQiGLdZJhXMe7XZWuD7orVo",
  "items": [
    {
      "type": "item",
      "name": "A segment of Toblerone",
      "sku": "TOB001",
      "description": "You can share my Toblerone, for 1 Dogecoin!",
      "value": "1",
      "quantity": 1,
      "image_link": ""
    }
  ],
  "created": "2023-08-17T15:40:13.935244+10:00",
  "total": "1",
  "pay_to_address": "DNBVSoHLhX4gQiGLdZJhXMe7XZWuD7orVo",
  "part_payment_detected": false,
  "total_payment_detected": false,
  "total_payment_confirmed": false,
  "payment_unconfirmed": false,
  "estimate_seconds_to_confirm": 0
}
</code></pre>
<h3 id="id"><a class="header" href="#id">id</a></h3>
<p>This is a unique ID, it also happens to be the public child address generated from the account
HD wallet for this invoice. You'll notice it's identical to <code>pay_to_address</code> for that reason, you
can use this to reference the invoice in future API calls or as a unique identifier for the
invoice in your own system.</p>
<h3 id="items"><a class="header" href="#items">items</a></h3>
<p>Items is an array of line items that get passed in when the invoice is created, Items have a
<code>value</code> which is a decimal amount of Dogecoin, as a string, per item. This is multiplied by
<code>quantity</code> and summed across all items to derrive the invoice <code>total</code>.</p>
<p>Items also have a <code>type</code> which must be one of:</p>
<ul>
<li>item</li>
<li>tax</li>
<li>fee</li>
<li>shipping</li>
<li>discount</li>
</ul>
<p>These types are primarily used to distinguish line-items in UI, so that taxes, shipping and fees
can be grouped separately. We do validate that all item <code>values</code> are a positve amount, except for
items of type <code>discount</code> which must be a negative amount.</p>
<h3 id="total"><a class="header" href="#total">total</a></h3>
<p>This is the total calculated amount owing for the invoice to be considered paid, and is calculated
as the sum of all item values * quantity. This is a decimal value as a string.</p>
<h3 id="pay_to_address"><a class="header" href="#pay_to_address">pay_to_address</a></h3>
<p>This is the dogecoin address for recieving invoice payment.</p>
<h3 id="part_payment_detected"><a class="header" href="#part_payment_detected">part_payment_detected</a></h3>
<p>This is a boolean flag that will be set when GigaWallet first detects any kind of payment in
a block. This may or may not be the total amount owing.</p>
<h3 id="total_payment_detected"><a class="header" href="#total_payment_detected">total_payment_detected</a></h3>
<p>This is a boolean flag that will be set when GigaWallet first detects a payment in a block that
would complete the total amount owing.</p>
<h3 id="total_payment_confirmed"><a class="header" href="#total_payment_confirmed">total_payment_confirmed</a></h3>
<p>This is a boolean flag that will be set when GigaWallet detects that <code>required_confirmations</code> have
been met on the network, this is the best means of determining payment has been made.</p>
<h3 id="payment_unconfirmed"><a class="header" href="#payment_unconfirmed">payment_unconfirmed</a></h3>
<p>This boolean will only be set in the event that <code>required_confirmations</code> has been met and confirmed,
however the blockchain has forked and eliminated your payment. This should only occur in the event that
you are using a very low <code>required_confirmations</code> count.</p>
<blockquote>
<p>⚠️ Note: What should you do in this event? Did I just lose my Dogecoin?</p>
<p>GigaWallet cannot hide you from the reality of the blockchain and the potential for soft-forks,
in day to day running we see these tip-reorgs happening semi regularly and removing 1 or at most 2
blocks of confirmation. In the event that a tip-reorg happens and that decrements the required number
of confirmations or even eliminates your payment, it is highly likely that the transaction will
be included in a new block shortly. GigaWallet will then re-issue and re-set the appropriate events / flags
on the new tip.</p>
<p>It is possible that the payer has intentionally issued a double-spend transaction hoping
to fake payment, we recommend that you set a <code>required_confirmations</code> value commensurate with
the amount of Dogecoin in your invoice and the appropriate level of risk. If you are selling
someone a Coffee for 30 Dogecoin perhaps a 1 block confirmation is fine, if you are selling
a million dollar house, there is no reason not to wait for 20-30 confirmations, the ink will
still be wet on the page anyway.</p>
</blockquote>
<h3 id="estimate_seconds_to_confirm"><a class="header" href="#estimate_seconds_to_confirm">estimate_seconds_to_confirm</a></h3>
<p>Once an intial payment has been seen, this value will be an estimate of the remaining seconds
before confirmation based on the <code>required_confirmations</code> set for this Invoice. This is useful
for anyone using a poll-method to query payment as you can roughly predict the wait-time. If
no payment has been seen or the invoice is already paid this value will be 0.</p>
<h2 id="admin-api-1"><a class="header" href="#admin-api-1">Admin API</a></h2>
<h3 id="post-accountforeignidinvoice"><a class="header" href="#post-accountforeignidinvoice">POST /account/:foreignID/invoice</a></h3>
<p>_Create an Invoice</p>
<p><code>:foreignID</code> is the unique identifier from your system which you used to create an <code>account</code>.</p>
<p><em><strong>REQUEST BODY:</strong></em></p>
<p>Expected POST Body:</p>
<pre><code class="language-json">{
  "items": [
    {
      "name": "Dogecoin Sticker",
      "value": "100.00",
      "quantity": 1,
      "type": "item"
    }
  ],
  "required_confirmations": 3
}
</code></pre>
<p><em><strong>RESPONSE BODY:</strong></em></p>
<pre><code class="language-json">{
  "id": "DMcUQWwMdpdXqiYNiYgCzrM5Wn85dYerQH",
  "items": [
    {
      "type": "item",
      "name": "Dogecoin Sticker",
      "sku": "",
      "description": "",
      "value": "100",
      "quantity": 1,
      "image_link": ""
    }
  ],
  "created": "2023-08-30T16:49:51.705419+10:00",
  "total": "100",
  "pay_to_address": "DMcUQWwMdpdXqiYNiYgCzrM5Wn85dYerQH",
  "part_payment_detected": false,
  "total_payment_detected": false,
  "total_payment_confirmed": false,
  "payment_unconfirmed": false,
  "estimate_seconds_to_confirm": 0
}
</code></pre>
<h3 id="get-accountforeignidinvoiceinvoiceid"><a class="header" href="#get-accountforeignidinvoiceinvoiceid">GET /account/:foreignID/invoice/:invoiceID</a></h3>
<p><em>Get an Invoice for a specific account</em></p>
<p><code>:foreignID</code> is the unique identifier from your system which you used to create an <code>account</code>.
<code>:invoiceID</code> is the unique identifier for an invoice, ie: <code>DMcUQWwMdpdXqiYNiYgCzrM5Wn85dYerQH</code>.</p>
<p><em><strong>RESPONSE BODY:</strong></em></p>
<pre><code class="language-json">{
  "id": "DMcUQWwMdpdXqiYNiYgCzrM5Wn85dYerQH",
  "items": [
    {
      "type": "item",
      "name": "Dogecoin Sticker",
      "sku": "",
      "description": "",
      "value": "100",
      "quantity": 1,
      "image_link": ""
    }
  ],
  "created": "2023-08-30T16:49:51.705419+10:00",
  "total": "100",
  "pay_to_address": "DMcUQWwMdpdXqiYNiYgCzrM5Wn85dYerQH",
  "part_payment_detected": false,
  "total_payment_detected": false,
  "total_payment_confirmed": false,
  "payment_unconfirmed": false,
  "estimate_seconds_to_confirm": 0
}
</code></pre>
<h3 id="get-accountforeignidinvoiceslimit100cursor0"><a class="header" href="#get-accountforeignidinvoiceslimit100cursor0">GET /account/:foreignID/invoices?limit=100&amp;cursor=0</a></h3>
<p><em>Enumerate an Invoice for a specific account.</em></p>
<p><code>:foreignID</code> is the unique identifier from your system which you used to create an <code>account</code>.
<code>limit</code> is the maximum number of records to return.
<code>cursor</code> starts at 0, and should be set to the <code>cursor</code> value returned by a previous call.</p>
<p>Those familiar with popular cursor-based APIs such as AWS etc should understand this
pattern, it allows for machine-to-machine fetching of all invoices and should not be
confused with an offset/limit style API.</p>
<p>The response contains two elements, <code>items</code> which is an array of invoices, and <code>cursor</code>
which should be passed to the next invocation. A cursor of <code>0</code> indicates there are
no further records.</p>
<p><em><strong>RESPONSE BODY:</strong></em></p>
<pre><code class="language-json">{
"items": [
      {
        "id": "DMcUQWwMdpdXqiYNiYgCzrM5Wn85dYerQH",
        "items": [
          {
            "type": "item",
            "name": "Dogecoin Sticker",
            "sku": "",
            "description": "",
            "value": "100",
            "quantity": 1,
            "image_link": ""
          }
        ],
        "created": "2023-08-30T16:49:51.705419+10:00",
        "total": "100",
        "pay_to_address": "DMcUQWwMdpdXqiYNiYgCzrM5Wn85dYerQH",
        "part_payment_detected": false,
        "total_payment_detected": false,
        "total_payment_confirmed": false,
        "payment_unconfirmed": false,
        "estimate_seconds_to_confirm": 0
      }
  ],
  "cursor": 0
}
</code></pre>
<h2 id="public-api-1"><a class="header" href="#public-api-1">Public API</a></h2>
<p>The public invoice APIs are available on a different port which is designed to be exposed to the internet via your
proxy or as part of your own API gateway. These APIs can be called by web or mobile clients, with the aim of providing
payment info to the payer. We imagine you will use these apis to show the payer a list of items they are purchasing, and
to provide details / address / QRcodes etc to facilitate payment.</p>
<h3 id="get-invoiceinvoiceid"><a class="header" href="#get-invoiceinvoiceid">GET /invoice/:invoiceID</a></h3>
<p><em>Get an Invoice</em></p>
<p><code>:invoiceID</code> is the unique identifier for an invoice, ie: <code>DMcUQWwMdpdXqiYNiYgCzrM5Wn85dYerQH</code>.</p>
<p><em><strong>RESPONSE BODY:</strong></em></p>
<pre><code class="language-json">{
  "id": "DMcUQWwMdpdXqiYNiYgCzrM5Wn85dYerQH",
  "items": [
    {
      "type": "item",
      "name": "Dogecoin Sticker",
      "sku": "",
      "description": "",
      "value": "100",
      "quantity": 1,
      "image_link": ""
    }
  ],
  "created": "2023-08-30T16:49:51.705419+10:00",
  "total": "100",
  "pay_to_address": "DMcUQWwMdpdXqiYNiYgCzrM5Wn85dYerQH",
  "part_payment_detected": false,
  "total_payment_detected": false,
  "total_payment_confirmed": false,
  "payment_unconfirmed": false,
  "estimate_seconds_to_confirm": 0
}
</code></pre>
<h3 id="get-invoiceinvoiceidqrpng"><a class="header" href="#get-invoiceinvoiceidqrpng">GET /invoice/:invoiceID/qr.png</a></h3>
<p>This endpoint does not return JSON, it returns a PNG image of a QR code containing a dogecoin
address in the format:</p>
<p><code>dogecoin:&lt;address&gt;?amount=&lt;amount&gt;&amp;ctx=&lt;dogeconnect url&gt;</code></p>
<p>The <code>address</code> is the <code>pay_to_address</code> in the invoice.
The <code>amount</code> is the <code>total</code> dogecoin in the invoice.
The <code>ctx</code> is a URL that points to a <code>dogecoin connect</code> payload.</p>
<p><img src="images/qr.png" alt="qr code" width="40%" style="margin-left: 30%;"/></p>
<p>This can be directly placed on your payment page and if scanned will load the user's
Dogecoin wallet to make a payment for the full amount of the invoice. This could be
used in a web interface, or even emailed or mailed with an invoice allowing immediate
payment by the recipient.</p>
<h3 id="get-invoiceinvoiceidconnect"><a class="header" href="#get-invoiceinvoiceidconnect">GET /invoice/:invoiceID/connect</a></h3>
<p>This endpoint returns a <code>dogecoin connect</code> payload which is defined as a new protocol
to facilitate payment from a self-custodial wallet without needing access to a relay.</p>
<p>The concept is that a Dogecoin wallet which understands the <code>dogecoin connect</code> protocol
can present in it's own UI, an invoice complete with items being purchased and have
the user generate a <code>transaction</code> which can be issued back to GigaWallet directly where
it will be validated and sent to the mempool.</p>
<p>This will allow GigaWallet to support <code>zero-confirmation</code> payments, aka <code>instant payments</code>
which are required for fast-turn-around services such as vending machines, coffee shops,
etc.</p>
<pre><code class="language-json">{
  "version": "0.1",
  "service_name": "Example Dogecoin Store",
  "service_icon_url": "https://example.com/icon.png",
  "service_domain": "example.com",
  "service_key_hash": "...",
  "payload": "eyJ0eXBlIjoiaW52b2ljZSIsInJlcXVlc3...",
  "hash": "..."
}
</code></pre>
<p>The JSON body contains a <code>payload</code> which is signed by the issuing store key which
can be stored on the client once recognised for the first time. This protocol is
still under development and support is incomplete, watch this space!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="doge-connect---payment-protocol"><a class="header" href="#doge-connect---payment-protocol">Doge Connect - Payment Protocol</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="paying-out"><a class="header" href="#paying-out">Paying Out</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="webhooks"><a class="header" href="#webhooks">Webhooks</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mqtt"><a class="header" href="#mqtt">MQTT</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="extending"><a class="header" href="#extending">Extending</a></h1>
<p><img src="images/gigawallet-components.png" alt="component diagram of GigaWallet" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js"></script>
        <script src="editor.js"></script>
        <script src="mode-rust.js"></script>
        <script src="theme-dawn.js"></script>
        <script src="theme-tomorrow_night.js"></script>

        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>
